import {Component, ViewChild} from '@angular/core';
import {IonicPage, NavController, NavParams, ViewController} from 'ionic-angular';
import {FormBuilder, FormGroup, Validators} from "@angular/forms";
import { Camera } from '@ionic-native/camera';
import {AngularFirestore} from 'angularfire2/firestore';

@IonicPage()
@Component({
  selector: 'page-createplayer',
  templateUrl: 'createplayer.html',
})
export class CreateplayerPage {
  @ViewChild('fileInput') fileInput;

  isReadyToSave: boolean;

  catPicture: string = 'data:image/png;base64,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';
  item: any;

  form: FormGroup;

  player: any = {name: '', picture: '', motto: ''};

  constructor(public navCtrl: NavController,
              public viewCtrl: ViewController,
              private formBuilder: FormBuilder,
              public camera: Camera,
              private fireStore: AngularFirestore) {
    this.form = formBuilder.group({
      profilePic: [''],
      name: ['', Validators.required],
      motto: ['']
    });

    // Watch the form for changes, and
    this.form.valueChanges.subscribe((v) => {
      this.isReadyToSave = this.form.valid;
    });
  }

  ionViewDidLoad() {
    console.log('ionViewDidLoad CreateplayerPage');
  }

  getPicture() {
    if (Camera['installed']()) {
      this.camera.getPicture({
        destinationType: this.camera.DestinationType.DATA_URL,
        targetWidth: 96,
        targetHeight: 96
      }).then((data) => {
        this.form.patchValue({ 'profilePic': 'data:image/jpg;base64,' + data });
      }, (err) => {
        alert('Unable to take photo');
      })
    } else {
      this.fileInput.nativeElement.click();
    }
  }

  processWebImage(event) {
    let reader = new FileReader();
    reader.onload = (readerEvent) => {

      let imageData = (readerEvent.target as any).result;
      this.form.patchValue({ 'profilePic': imageData });
    };

    reader.readAsDataURL(event.target.files[0]);
  }

  getProfileImageStyle() {
    return 'url(' + this.form.controls['profilePic'].value + ')'
  }

  cancel() {
    this.viewCtrl.dismiss();
  }

  done() {
    if (!this.form.valid) { return; }
    console.log(this.form.value);
    this.player.name = this.form.controls['name'].value;
    if(this.form.controls['profilePic'].value)
      this.player.picture = this.form.controls['profilePic'].value
    else
      this.player.picture = this.catPicture;
    if(this.form.controls['motto'].value)
      this.player.motto = this.form.controls['motto'].value;
    else
      this.player.motto = 'Ich bin zu cool für ein Motto';
    console.log(this.player);
    this.fireStore.collection<any>('players').add(
      {
        name: this.player.name,
        picture: this.player.picture,
        motto: this.player.motto
      }
    ).then((res) => {
      console.log(res);
      this.viewCtrl.dismiss();
    }).catch((err) => {
      console.log(err);
    });
  }

}
